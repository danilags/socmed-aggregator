<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <title>Add Tweet</title>
    <script type="text/javascript">

    </script>

  </head>
  <body>
    <h2>What's happenning?</h2>
    <!-- <form class="" action="http://localhost:3000/update" method="post"> -->
      <label>Status</label>
      <input type="text" name="status" value="" id="new-status">
      <button type="submit" class="submit">Tweet</button>
      <a href="./"><button>Cancel</button></a>

      <div id="twits" class="container">

      </div>

    <!-- </form> -->
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
  </body>
</html>

<script type="text/javascript">

  $('.submit').click(function() {

    $.ajax({
      url: "http://localhost:3000/update",
      type: 'POST',
      data: {
        status: $('#new-status').val()
      },
      success: function(status) {
        // console.log(status);
        // var newArr = status.map(function(dt) {
        //   const dataParse = dt.JSON.parse()
        //   return dataParse.text
        // })
        const dataParse = JSON.parse(status)
        $('#twits').prepend(`<blockquote><p>${dataParse.text}</p><footer>Another twit from <cite title="Source Title">${dataParse.user.screen_name}</cite></footer></blockquote>`),
        $('#new-status').val('')
      }
    });
  })

</script>
